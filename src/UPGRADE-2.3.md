UPGRADE FROM 2.2 to 2.3
========================

MagentoBundle
-------------
- Interface `Oro\Bundle\MagentoBundle\Provider\Transport\MagentoSoapTransportInterface` was added. 
    - public method `call($action, $params = [])` was added
- Interface `Oro\Bundle\MagentoBundle\Provider\Transport\MagentoTransportInterface`
    - removed method `call` because it conflicts with REST conception. MagentoTransportInterface from now will not allow to specify http methods and resource through parameters.
    - public method `isCustomerHasUniqueEmail(Customer $customer)` was added
    - public method `getRequiredExtensionVersion()` was added
- Class `Oro\Bundle\MagentoBundle\Provider\ChannelType` was renamed to `Oro\Bundle\MagentoBundle\Provider\MagentoChannelType` and its service was renamed to `oro_magento.provider.magento_channel_type`
- Class `Oro\Bundle\MagentoBundle\Provider\Iterator\StoresSoapIterator` moved to `Oro\Bundle\MagentoBundle\Provider\Iterator\Soap\StoresSoapIterator`:
    - constant `ALL_WEBSITES` moved to `Oro\Bundle\MagentoBundle\Entity\Website`
    - constant `ADMIN_WEBSITE_ID` moved to `Oro\Bundle\MagentoBundle\Entity\Website`
    - constant `ADMIN_STORE_ID` moved to `Oro\Bundle\MagentoBundle\Entity\Store`
- Class `Oro\Bundle\MagentoBundle\Provider\Magento2ChannelType` was added to support Magento2 as a new integration
- Class `Oro\Bundle\MagentoBundle\Controller\SoapController.php` was removed. Use `Oro\Bundle\MagentoBundle\Controller\IntegrationConfigController.php`instead
- Class `Oro\Bundle\MagentoBundle\Controller\IntegrationConfigController.php` was added. It is a universal entry point for both Magento and Magento2 integration check requests
- Class `Oro\Bundle\MagentoBundle\Entity\MagentoSoapTransport' was renamed to `Oro\Bundle\MagentoBundle\Entity\MagentoTransport`. Now it is used for both Magento and Magento2 transports
    - added property `apiToken` to store rest token
    - renamed property `wsdlUrl` to `apiUrl`. But `setWsldUrl()` and `getWsdlUrl` methods were left for backward compatibility (they work with `apiUrl` property)
- Class `Oro\Bundle\MagentoBundle\Entity\Repository\MagentoSoapTransportRepository` was renamed to `Oro\Bundle\MagentoBundle\Entity\Repository\MagentoTransportRepository`
- Class `Oro\Bundle\MagentoBundle\Form\EventListener\SoapConnectorsFormSubscriber` was renamed to `Oro\Bundle\MagentoBundle\Form\EventListener\ConnectorsFormSubscriber`
    - added protected method `getFormChannelType`
- Class `Oro\Bundle\MagentoBundle\Form\EventListener\SoapSettingsFormSubscriber` was renamed to `Oro\Bundle\MagentoBundle\Form\EventListener\SettingsFormSubscriber` and its service were renamed to `oro_magento.form.subscriber.transport_setting`
    - protected method `getModifierWebsitesList` was renamed to `modifyWebsitesList` and now it returns void.
- Abstract class `Oro\Bundle\MagentoBundle\Form\Type\AbstractTransportSettingFormType` was added. It is inherited by `SoapTransportSettingFormType` and `RestTransportSettingFormType`
- Class `Oro\Bundle\MagentoBundle\Form\Type\RestTransportSettingFormType` and its service `oro_magento.form.type.rest_transport_setting` were added
- Class `Oro\Bundle\MagentoBundle\Form\Type\SoapTransportSettingFormType` was changed
  - constructor was removed
  - method `setDefaultOptions` was moved to parent class
- Class `Oro\Bundle\MagentoBundle\Form\Type\SoapTransportCheckButtonType` was renamed to `Oro\Bundle\MagentoBundle\Form\Type\TransportCheckButtonType`
- Class `Oro\Bundle\MagentoBundle\Handler\TransportHandler` and its service `oro_magento.handler.transport` were added. It is a layer between transport and controller.
    - Method `getMagentoTransport` was added. Its main responsibility is to initialize and return MagentoTransport from check request.
    - Method `getCheckResponse`: returns array with data for response.
- Class `Oro\Bundle\MagentoBundle\ImportExport\Converter\Rest\StoreDataConverter` and its service `oro_magento.importexport.data_converter.rest.store` were added
- Class `Oro\Bundle\MagentoBundle\ImportExport\Converter\Rest\WebsiteDataConverter` and its service `oro_magento.importexport.data_converter.rest.website` were added
- Method `getSores` in `Oro\Bundle\MagentoBundle\Provider\CartExpirationProcessor` was renamed to `getStores`
- Class `Oro\Bundle\MagentoBundle\Provider\AbstractMagentoConnector` was moved to `Oro\Bundle\MagentoBundle\Connector\AbstractMagentoConnector`
- Class `Oro\Bundle\MagentoBundle\Provider\CartConnector` was moved to `Oro\Bundle\MagentoBundle\Connector\CartConnector`
- Class `Oro\Bundle\MagentoBundle\Provider\OrderConnector` was moved to `Oro\Bundle\MagentoBundle\Connector\OrderConnector`
- Class `Oro\Bundle\MagentoBundle\Provider\RegionConnector` was moved to `Oro\Bundle\MagentoBundle\Connector\RegionConnector`
- Class `Oro\Bundle\MagentoBundle\Provider\CustomerConnector` was moved to `Oro\Bundle\MagentoBundle\Connector\CustomerConnector`
- Class `Oro\Bundle\MagentoBundle\Provider\NewsletterSubscriberConnector` was moved to `Oro\Bundle\MagentoBundle\Connector\NewsletterSubscriberConnector`
- Class `Oro\Bundle\MagentoBundle\Provider\MagentoConnectorInterface` was moved to `Oro\Bundle\MagentoBundle\Connector\MagentoConnectorInterface`
- Class `Oro\Bundle\MagentoBundle\Provider\Connector\Rest\StoreConnector` and its service `oro_magento.mage.rest.store` were added
- Class `Oro\Bundle\MagentoBundle\Provider\Connector\Rest\WebsiteConnector` and its service `oro_magento.mage.rest.website` were added
- Class `Oro\Bundle\MagentoBundle\ProviderConnectorChoicesProvider` and its service `oro_magento.provider.connector_choices` were added. It has method:
    - `getAllowedConnectorsChoices` it returns a list of connectors available for some integration.
- Class `Oro\Bundle\MagentoBundle\Provider\Customer\CustomerIconProvider`. Its service was renamed to `oro_magento.provider.customer.magento_customer_icon`
    - construction signature was changed, now it takes the next arguments:
        - TypesRegistry $integrationTypeRegistry
        - CacheManager $cacheManager
- Class `Oro\Bundle\MagentoBundle\Provider\Iterator\AbstractLoadeableSoapIterator` was renamed to `Oro\Bundle\MagentoBundle\Provider\Iterator\AbstractLoadeableIterator`
    - protected property `transport` was removed
    - protected method `processCollectionResponse` was removed
- Class `Oro\Bundle\MagentoBundle\Provider\Iterator\AbstractPageableSoapIterator` was renamed to `Oro\Bundle\MagentoBundle\Provider\Iterator\AbstractPageableIterator`
    - construction signature was changed, now it takes the next arguments:
        - MagentoSoapTransportInterface $transport
        - array $settings
    - protected method `processCollectionResponse` was removed   
    - protected method `convertResponseToMultiArray` was removed   
- Interface `Oro\Bundle\MagentoBundle\Provider\Iterator\NewsletterSubscriberBridgeIteratorInterface` was added
- Abstract class `Oro\Bundle\MagentoBundle\Provider\Iterator\Rest\AbstractLoadeableRestIterator` was added
- Class `Oro\Bundle\MagentoBundle\Provider\Iterator\Rest\BaseMagentoRestIterator` was added
- Class `Oro\Bundle\MagentoBundle\Provider\Iterator\Rest\StoresRestIterator` was added
- Class `Oro\Bundle\MagentoBundle\Provider\Iterator\Rest\WebsiteRestIterator` was added
- Class `Oro\Bundle\MagentoBundle\Provider\Iterator\AbstractBridgeIterator` was moved to `Oro\Bundle\MagentoBundle\Provider\Iterator\Soap\AbstractBridgeIterator`
    - construction signature was changed, now it takes the next arguments:
        - MagentoSoapTransportInterface $transport
        - array $settings
- Abstract class `Oro\Bundle\MagentoBundle\Provider\Iterator\Rest\AbstractLoadeableSoapIterator` was added
    - construction signature:
        - MagentoSoapTransportInterface $transport
    - method processCollectionResponse($response) was added
- Abstract class `Oro\Bundle\MagentoBundle\Provider\Iterator\Rest\AbstractPageableSoapIterator` was added
    - method `processCollectionResponse($response)` was added
    - method `convertResponseToMultiArray($response)` was added
    - method `applyWebsiteFilters(array $websiteIds, array $storeIds)` was added
- Class `Oro\Bundle\MagentoBundle\Provider\Iterator\CartsBridgeIterator` was moved to `Oro\Bundle\MagentoBundle\Provider\Iterator\Soap\CartsBridgeIterator`
- Class `Oro\Bundle\MagentoBundle\Provider\Iterator\CustomerBridgeIterator` was moved to `Oro\Bundle\MagentoBundle\Provider\Iterator\Soap\CustomerBridgeIterator`
- Class `Oro\Bundle\MagentoBundle\Provider\Iterator\CustomerSoapIterator` was moved to `Oro\Bundle\MagentoBundle\Provider\Iterator\Soap\CustomerSoapIterator`
- Class `Oro\Bundle\MagentoBundle\Provider\Iterator\CustomerGroupBridgeIterator` was moved to `Oro\Bundle\MagentoBundle\Provider\Iterator\Soap\CustomerGroupBridgeIterator`
- Class `Oro\Bundle\MagentoBundle\Provider\Iterator\NewsletterSubscriberBridgeIterator` was moved to `Oro\Bundle\MagentoBundle\Provider\Iterator\Soap\NewsletterSubscriberBridgeIterator` and now implements `NewsletterSubscriberBridgeIteratorInterface`
- Class `Oro\Bundle\MagentoBundle\Provider\Iterator\OrderBridgeIterator` was moved to `Oro\Bundle\MagentoBundle\Provider\Iterator\Soap\OrderBridgeIterator`
- Class `Oro\Bundle\MagentoBundle\Provider\Iterator\OrderSoapIterator` was moved to `Oro\Bundle\MagentoBundle\Provider\Iterator\Soap\OrderSoapIterator`
- Class `Oro\Bundle\MagentoBundle\Provider\Iterator\RegionSoapIterator` was moved to `Oro\Bundle\MagentoBundle\Provider\Iterator\Soap\RegionSoapIterator`
    - protected method `findEntitiesToProcess()` was moved to parent class
    - protected method `getEntityIds()` was moved to parent class
    - protected method `getEntity($id)` was moved to parent class
    - protected method `getIdFieldName()` was moved to parent class
    - protected method `current()` was moved to parent class
- Class `Oro\Bundle\MagentoBundle\Provider\Iterator\WebsiteSoapIterator` was moved to `Oro\Bundle\MagentoBundle\Provider\Iterator\Soap\WebsiteSoapIterator`
- Class `Oro\Bundle\MagentoBundle\Provider\Magento2ChannelType` and its service `oro_magento.provider.magento2_channel_type` were added
    - method getLabel() was added
    - method getIcon() was added
- Class `Oro\Bundle\MagentoBundle\Provider\RestPingProvider` and its service `oro_magento.provider.rest_ping_provider` were added. Use it to send ping request to Magento and store response data.
    - public method `setClient(RestClientInterface $client)` was added
    - public method `setHeaders(array $headers)` was added
    - public method `setParams(array $params)` was added
    - public method `isCustomerSharingPerWebsite()` was added
    - public method `getCustomerScope()` was added
    - public method `getMagentoVersion()` was added
    - public method `getBridgeVersion()` was added
    - public method `getAdminUrl()` was added
    - public method `isExtensionInstalled()` was added
    - public method `ping()` was added
    - public method `forceRequest()` was added
    - protected method `getClient()` was added
    - protected method `doRequest()` was added
    - protected method `processResponse(array $responseData)` was added
- Class `Oro\Bundle\MagentoBundle\Provider\RestRokenProvider` and its service `oro_magento.provider.rest_token_provider` were added. Use it to get a token, generate a new token and store it.
    - construction signature:
        - RegistryInterface $doctrine
        - Mcrypt $mcrypt
    - public method `getTokenFromEntity(MagentoTransport $transportEntity)` was added
    - public method `generateNewToken(MagentoTransport $transportEntity, RestClientInterface $client)` was added
    - protected method `doTokenRequest(RestClientInterface $client, array $params)` was added
    - protected method `validateStatusCodes(RestException $e)` was added
    - protected method `getTokenRequestParams(ParameterBag $parameterBag)` was added
    - protected method `updateToken(MagentoTransport $transportEntity, $token)` was added
- Class `Oro\Bundle\MagentoBundle\Provider\Transport\RestClientFactory` was added. Extends `Oro\Bundle\IntegrationBundle\Provider\Rest\Client\BridgeRestClientFactory`
    - protected method `getClientBaseUrl(ParameterBag $parameterBag)` was added
    - protected method `getClientOptions(ParameterBag $parameterBag)` was added
- Class `Oro\Bundle\MagentoBundle\Provider\Transport\RestTransport` and its service `oro_magento.transport.rest_transport` were added. Implements `TransportInterface`, `RestTransportInterface`, `MagentoTransportInterface`, `ServerTimeAwareInterface`, `PingableInterface`, `LoggerAwareInterface`
    - const `REGION_RESPONSE_TYPE` was added
    - construction signature was changed, now it takes the next arguments:
        - BridgeRestClientFactory $clientFactory
        - RestTokenProvider $restTokenProvider
        - RestPingProvider $pingProvider
        - ResponseConverterManager $responseConverterManager
This class has the same responsibilities as SoapTransport.
- Interface `Oro\Bundle\MagentoBundle\Provider\Transport\RestTransportInterface` was added
    - public method `doGetStoresRequest()::array` was added
    - public method `doGetWebsitesRequest()::array` was added
- Class `Oro\Bundle\MagentoBundle\Provider\Transport\SoapTransport` now implements `TransportCacheClearInterface`
    - construction signature was changed, now it takes the next arguments:
        - Mcrypt $encoder
        - WsdlManager $wsdlManager
        - UniqueCustomerEmailSoapProvider $uniqueCustomerEmailProvider
        - array $bundleConfig = []
    - public method `isCustomerHasUniqueEmail(Customer $customer)` was added
    - public method `getRequiredExtensionVersion()` was added
    - public method `cacheClear($resource = null)` was added
- Class `Oro\Bundle\MagentoBundle\Provider\TransportEntityProvider` and its service `oro_magento.provider.transport_entity` were added
    - construction signature:
        - FormFactoryInterface $formFactory
        - ManagerRegistry $registry
    - public method `getTransportEntityByRequest(MagentoTransportInterface $transport, Request $request)` was added
    - protected method `findTransportEntity(TransportInterface $settingsEntity, $entityId)` was added
- Class `Oro\Bundle\MagentoBundle\Provider\UniqueCustomerEmailSoapProvider` and its service `oro_magento.provider.soap.unique_customer_email` were added
    - public method `isCustomerHasUniqueEmail(MagentoSoapTransportInterface $transport, Customer $customer)` was added
    - protected method `doRequest(MagentoSoapTransportInterface $transport, array $filters)` was added
    - protected method `getPreparedFilters(Customer $customer)` was added
- Class `Oro\Bundle\MagentoBundle\Provider\WebsiteChoicesProvider` and its service `oro_magento.provider.website_choices` were added
    - construction signature:
        - TranslatorInterface $translator
    - public method `iformatWebsiteChoices(MagentoTransportInterface $transport)` was added
- The next batch jobs were added to `batch_jobs.yml`:
    - mage_store_rest_import
    - mage_website_rest_import
- New channel `magento2` was added to `channels.yml`
- Route `oro_magento_soap_check` was renamed to `oro_magento_integration_check`
- Translation with key `not_valid_parameters` was removed
- Class `Oro\Bundle\MagentoBundle\Validator\UniqueCustomerEmailValidator` was changed
    - construction signature was changed, now it takes the next arguments:
        - TypesRegistry $typesRegistry
- Interface `Oro\Bundle\MagentoBundle\Converter\RestResponseConverterInterface` was added
    - public method `convert($data)` was added
- Class `Oro\Bundle\MagentoBundle\Converter\Rest\RegionConverter` with its service `oro_magento.converter.rest.region_converter` were added. Implements `RestResponseConverterInterface`
- Class `Oro\Bundle\MagentoBundle\Converter\Rest\ResponseConverterManager` with its service `oro_magento.converter.rest.response_converter_manager` were added
    - public method `convert($data, $type)` was added
    - public method `addConverter($responseType, RestResponseConverterInterface $converter)` was added
- Class `Oro\Bundle\MagentoBundle\DependencyInjection\Compiler\ResponseConvertersPass` was added. Collects converters that implement `RestResponseConverterInterface`
- Abstract class `Oro\Bundle\MagentoBundle\Provider\Iterator\AbstractRegionIterator` was added
    - abstract protected method `getCountryList()` was added
- Abstract class `Oro\Bundle\MagentoBundle\Provider\Iterator\RegionRestIterator` was added. Extends `AbstractRegionIterator` with REST implementation
