{% block orocrm_channel_datasource_form_row %}
    {{ block('form_row') }}
{% endblock %}

{% block orocrm_channel_datasource_form_widget %}
    {{ form_widget(form) }}

    {% set options = {
        idEl:   '#' ~ form.identifier.vars.id,
        dataEl: '#' ~ form.data.vars.id,
        typeEl: '#' ~ form.type.vars.id,
        nameEl: '#' ~ form.name.vars.id,
    } %}

<<<<<<< HEAD
    <div data-page-component-module="orocrmchannel/js/app/components/integration-widget"
         data-page-component-options="{{ options|json_encode }}"></div>
=======
    {% import 'OroCRMChannelBundle:Form:channelViewJS.html.twig' as channelViewJS %}
    {{ channelViewJS.renderChannelFormJS(form) }}

    {{ form_end(form, {'render_rest': false}) }}
>>>>>>> feature/CRM-1567
{% endblock %}

{% block orocrm_channel_entity_choice_form_row %}
    {# Storage element will be hidden field #}
    {{ block('hidden_widget') }}

    {#{{ _self.renderEntitySelectionJS(form) }}#}

    {#
        Renders JS for instantiation of "Entity selection" component
        @TODO move to other macroses
    #}
    {% macro renderEntitySelectionJS(form) %}
        {% set options = {} %}

<<<<<<< HEAD
        <div data-page-component-module="orocrmchannel/js/entity-management/entity-selection-view"
             data-page-component-options="{{ options|json_encode }}"></div>
    {% endmacro %}
=======
    {% import 'OroCRMChannelBundle:Form:integrationWidgetHandlerJS.html.twig' as integrationWidgetHandlerJS %}
    {{ integrationWidgetHandlerJS.integrationWidgetHandlerViewJS(form, containerElementId) }}
>>>>>>> feature/CRM-1567
{% endblock %}
